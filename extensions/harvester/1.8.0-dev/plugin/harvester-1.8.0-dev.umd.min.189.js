(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_8_0_dev"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_8_0_dev"]||[]).push([[189],{55423:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});var s=r(9274);const o={class:"vm-schedule-filter"},a={key:0,class:"banner-item bg-warning"},n=["disabled"],i={class:"filter-popup"};function l(e,t,r,l,c,d){const p=(0,s.resolveComponent)("RadioGroup"),u=(0,s.resolveComponent)("v-dropdown");return(0,s.openBlock)(),(0,s.createElementBlock)("div",o,[c.selected?((0,s.openBlock)(),(0,s.createElementBlock)("span",a,[(0,s.createTextVNode)((0,s.toDisplayString)(e.t("harvester.tableHeaders.vmSchedule"))+(0,s.toDisplayString)(c.selected?` = ${c.selected}`:"")+" ",1),(0,s.createElementVNode)("i",{class:"icon icon-close ml-5",onClick:t[0]||(t[0]=(...e)=>d.remove&&d.remove(...e))})])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(u,{"popper-class":"vm-schedule-dropdown",triggers:d.scheduleOptions.length?["click"]:[],placement:"bottom-end",offset:"1",distance:20},{popper:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",i,[(0,s.createVNode)(p,{value:c.selected,"onUpdate:value":[t[1]||(t[1]=e=>c.selected=e),d.onSelect],class:"mr-10 ml-10",name:"model",options:d.scheduleOptions,labels:d.scheduleOptions},null,8,["value","options","labels","onUpdate:value"])])])),default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("button",{ref:"actionDropDown",class:"btn bg-primary mr-10",disabled:!d.enableFilterButton},[(0,s.renderSlot)(e.$slots,"title",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.t("harvester.fields.filterSchedule")),1)]),!0)],8,n)])),_:3},8,["triggers"])])}var c=r(10196),d={name:"HarvesterFilterVMSchedule",emits:["change-rows"],components:{RadioGroup:c.z},props:{rows:{type:Array,required:!0}},data(){return{selected:""}},computed:{scheduleOptions(){const e=this.rows.map((e=>e.sourceSchedule)).filter((e=>e));return Array.from(new Set(e))},enableFilterButton(){return this.rows.some((e=>void 0!==e.sourceSchedule))}},methods:{onSelect(e){this.selected=e,this.filterRows()},remove(){this.selected="",this.filterRows()},filterRows(){if(!this.selected)return void this.$emit("change-rows",this.rows);const e=this.rows.filter((e=>e.sourceSchedule===this.selected));this.$emit("change-rows",e,this.selected)}},watch:{rows:{deep:!0,immediate:!1,handler(){this.filterRows()}}}},p=(r(21967),r(69753),r(47433));const u=(0,p.A)(d,[["render",l],["__scopeId","data-v-05c066f4"]]);var h=u},58784:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});var s=r(9274);const o={class:"overview-web-console"};function a(e,t,r,a,n,i){const l=(0,s.resolveComponent)("ButtonDropdown");return(0,s.openBlock)(),(0,s.createElementBlock)("div",o,[(0,s.createVNode)(l,{disabled:i.isOff,"no-drop":i.isOff,"button-label":"Console","dropdown-options":i.options,size:"sm",onClickAction:i.handleDropdown},null,8,["disabled","no-drop","dropdown-options","onClickAction"])])}var n=r(89958),i=r(65359),l=r(50784),c=r(20652),d={name:"VMConsoleBar",components:{ButtonDropdown:n.A},props:{resourceType:{type:Object,required:!0,default:()=>({})}},computed:{...(0,i.L8)({t:"i18n/t"}),isOff(){return this.resourceType.stateDisplay===l.OFF},options(){return[{label:this.t("harvester.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("harvester.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){let t=this.resourceType.metadata?.ownerReferences?.[0]?.uid;void 0===t&&(t=this.resourceType.metadata.uid);const r=window.location.host,s=window.location.pathname.replace(this.$route.path,""),o=this.$route?.params,a=`https://${r}${s}/${c.KR}/c/${o.cluster}/console/${t}/${e}`;window.open(a,"_blank",`toolbars=0,width=${screen.width-200},height=${screen.height-200},left=0,top=0,noreferrer`)},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},p=(r(93969),r(47433));const u=(0,p.A)(d,[["render",a]]);var h=u},69760:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(9274);const o={key:0},a={key:0};function n(e,t,r,n,i,l){const c=(0,s.resolveComponent)("BadgeState");return l.migrationState?((0,s.openBlock)(),(0,s.createElementBlock)("div",o,[r.showSuccess?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("span",a,"/")),(0,s.createVNode)(c,{label:l.migrationState,color:l.migrationBackground},null,8,["label","color"])])):(0,s.createCommentVNode)("",!0)}var i=r(41418),l=r(32766),c={emits:["state-changed"],components:{BadgeState:i.j},props:{vmResource:{type:Object,required:!0},showSuccess:{type:Boolean,default:!0}},computed:{vmiResource(){const e=this.$store.getters["harvester/all"](l.rk.VMI)||[],t=e.find((e=>e?.metadata?.ownerReferences?.[0]?.uid===this.vmResource?.metadata?.uid));return t},migrationState(){return this.vmiResource?.migrationState?.status||""},migrationBackground(){return this.vmiResource?.migrationStateBackground||""}},watch:{migrationState(e){this.$emit("state-changed",e)}}},d=(r(50002),r(47433));const p=(0,d.A)(c,[["render",n],["__scopeId","data-v-9e992d88"]]);var u=p},98993:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(9274);const o={class:"state"};function a(e,t,r,a,n,i){const l=(0,s.resolveComponent)("HarvesterMigrationState"),c=(0,s.resolveComponent)("VMState"),d=(0,s.resolveComponent)("v-dropdown");return(0,s.openBlock)(),(0,s.createElementBlock)("span",null,[(0,s.withDirectives)((0,s.createVNode)(l,{"vm-resource":r.row,onStateChanged:i.migrationStateChanged},null,8,["vm-resource","onStateChanged"]),[[s.vShow,n.isMigrating]]),(0,s.withDirectives)((0,s.createElementVNode)("div",o,[(0,s.createVNode)(c,{row:r.row},null,8,["row"]),i.warningMessage.length?((0,s.openBlock)(),(0,s.createBlock)(d,{key:0,ref:"popover",trigger:"manual",offset:"16"},{popper:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",{onMouseenter:t[3]||(t[3]=e=>i.showMessage(!0)),onMouseleave:t[4]||(t[4]=e=>i.showMessage(!1))},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(i.warningMessage,((o,a)=>((0,s.openBlock)(),(0,s.createElementBlock)("p",{key:a},[(0,s.createTextVNode)((0,s.toDisplayString)(a+1)+". ",1),i.canMiss(r.row,o)?((0,s.openBlock)(),(0,s.createElementBlock)("a",{key:0,class:"text-link",role:"button",onClick:t[2]||(t[2]=(...e)=>i.dismiss&&i.dismiss(...e))},(0,s.toDisplayString)(e.t("harvester.upgradePage.dismissMessage")),1)):(0,s.createCommentVNode)("",!0),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(o),1)])))),128))],32)])),default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("span",{class:"tooltip-target",onMouseenter:t[0]||(t[0]=e=>i.showMessage(!0)),onMouseleave:t[1]||(t[1]=e=>i.delayClose())},t[5]||(t[5]=[(0,s.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"},null,-1)]),32)])),_:1},512)):(0,s.createCommentVNode)("",!0)],512),[[s.vShow,!n.isMigrating]])])}var n=r(74562),i=r(69760),l={components:{VMState:n.A,HarvesterMigrationState:i["default"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1,timer:null}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},computed:{warningMessage(){const e=[];if("VM error"===this.row?.actualState&&this.row.warningMessage?.message&&e.push(this.row.warningMessage?.message),this.row?.migrationMessage&&e.push(this.row?.migrationMessage.message),this.row.warningMessage?.message)if(this.row.warningMessage?.pod){const t=this.row.warningMessage.pod;t.metadata?.state?.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(t.metadata?.state?.message)&&e.push(t.metadata?.state?.message)}else e.push(this.row.warningMessage?.message);return e}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e},showMessage(e){this.timer&&clearTimeout(this.timer),this.$refs.popover&&(e?this.$refs.popover.show():this.$refs.popover.hide())},delayClose(){this.timer=setTimeout((()=>{this.showMessage(!1)}),500)},async dismiss(){try{await this.row.doAction("dismissInsufficientResourceQuota")}catch(e){400!==e?._status&&503!==e?._status||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e?.errors[0]},{root:!0})}},canMiss(e,t){return e.warningMessage?.message===t&&e.warningMessage?.canDismiss}}},c=(r(84326),r(47433));const d=(0,c.A)(l,[["render",a],["__scopeId","data-v-216558d8"]]);var p=d},9470:function(e,t,r){"use strict";r.r(t),r.d(t,{NETWORK_HEADERS:function(){return w},default:function(){return b}});var s=r(9274);const o={key:1},a={class:"state"};function n(e,t,r,n,i,l){const c=(0,s.resolveComponent)("Loading"),d=(0,s.resolveComponent)("router-link"),p=(0,s.resolveComponent)("Banner"),u=(0,s.resolveComponent)("BadgeState"),h=(0,s.resolveComponent)("v-dropdown"),m=(0,s.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0})):((0,s.openBlock)(),(0,s.createElementBlock)("div",o,[l.abnormalNetwork.length?((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,{key:0},(0,s.renderList)(l.abnormalNetwork,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(p,{key:t,color:"error"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(d,{to:e.to},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.name)+": ",1)])),_:2},1032,["to"]),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(e.message),1)])),_:2},1024)))),128)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(m,(0,s.mergeProps)(e.$attrs,{headers:l.headers,"default-sort-by":"age",schema:l.schema,groupable:!0,rows:l.filterRows,"key-field":"_key"}),{"cell:state":(0,s.withCtx)((({row:e})=>[(0,s.createElementVNode)("div",a,[(0,s.createVNode)(u,{row:e},null,8,["row"]),e.clusterNetworkErrorMessage?((0,s.openBlock)(),(0,s.createBlock)(h,{key:0,trigger:"hover",offset:"16"},{popper:(0,s.withCtx)((()=>[(0,s.createElementVNode)("p",null,(0,s.toDisplayString)(e.clusterNetworkErrorMessage),1)])),default:(0,s.withCtx)((()=>[t[0]||(t[0]=(0,s.createElementVNode)("span",{class:"tooltip-target"},[(0,s.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"})],-1))])),_:2,__:[0]},1024)):(0,s.createCommentVNode)("",!0)])])),_:1},16,["headers","schema","rows"])]))}var i=r(9980),l=r(87619),c=r(16822),d=r(74562),p=r(68774),u=r(35664),h=r(88339),m=r(2602),v=r(32766);const g={id:v.rk.NETWORK_ATTACHMENT,type:u.yx,attributes:{kind:v.rk.NETWORK_ATTACHMENT,namespaced:!0},metadata:{name:v.rk.NETWORK_ATTACHMENT}},w=[p.o_,p.CU,{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"BadgeStateFormatter",formatterOpts:{arbitrary:!0},width:130},p.K];var f={name:"HarvesterListNetworks",components:{ResourceTable:c.A,Banner:i.l,Loading:l.A,BadgeState:d.A},async fetch(){const e=this.$store.getters["currentCluster"],t=e.isHarvester?"harvester":"cluster",r={rows:this.$store.dispatch(`${t}/findAll`,{type:u.XG})};this.$store.getters[`${t}/schemaFor`](v.rk.NODE_NETWORK)&&(r.hostNetworks=this.$store.dispatch(`${t}/findAll`,{type:v.rk.NODE_NETWORK})),this.$store.getters[`${t}/schemaFor`](v.rk.CLUSTER_NETWORK)&&(r.clusterNetworks=this.$store.dispatch(`${t}/findAll`,{type:v.rk.CLUSTER_NETWORK}));const s=await(0,h.kR)(r);this.rows=s.rows,this.hostNetworks=s.hostNetworks||[]},data(){return{hash:{},rows:[],hosts:[],hostNetworks:[]}},computed:{headers(){return[p.c4,p.o_,p.CU,{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"clusterNetwork",value:"clusterNetwork",sort:"clusterNetwork",labelKey:"harvester.network.clusterNetwork.label"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"NetworkRouteConnectivity",formatterOpts:{arbitrary:!0},width:130},p.K]},schema(){return g},abnormalNetwork(){const e=this.hostNetworks.filter((e=>!e.isReady));return e.map((e=>e.linkMessage))},filterRows(){return this.rows.filter((e=>!e.metadata?.annotations?.[m.r.STORAGE_NETWORK]))}},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)}},y=(r(55336),r(47433));const k=(0,y.A)(f,[["render",n],["__scopeId","data-v-3a727eb5"]]);var b=k},61117:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k},schema:function(){return g}});var s=r(9274);const o={key:1},a={key:1};function n(e,t,r,n,i,l){const c=(0,s.resolveComponent)("Loading"),d=(0,s.resolveComponent)("Masthead"),p=(0,s.resolveComponent)("FilterVMSchedule"),u=(0,s.resolveComponent)("router-link"),h=(0,s.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0})):((0,s.openBlock)(),(0,s.createElementBlock)("div",o,[(0,s.createVNode)(d,{schema:null,resource:i.resource,"type-display":l.typeDisplay,"create-button-label":e.t("harvester.vmSnapshot.createText")},null,8,["resource","type-display","create-button-label"]),(0,s.createVNode)(h,(0,s.mergeProps)(e.$attrs,{headers:l.headers,groupable:!0,rows:l.filteredRows,schema:l.schema,"sort-generation-fn":l.sortGenerationFn,"key-field":"_key","default-sort-by":"age"}),(0,s.createSlots)({"col:name":(0,s.withCtx)((({row:e})=>[(0,s.createElementVNode)("td",null,[(0,s.createElementVNode)("span",null,[e.status&&e.status.source?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,to:e.detailLocation},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,s.openBlock)(),(0,s.createElementBlock)("span",a,(0,s.toDisplayString)(e.nameDisplay),1))])])])),_:2},[l.schedulingVMBackupFeatureEnabled?{name:"more-header-middle",fn:(0,s.withCtx)((()=>[(0,s.createVNode)(p,{rows:l.getRawRows,onChangeRows:l.changeRows},null,8,["rows","onChangeRows"])])),key:"0"}:void 0]),1040,["headers","rows","schema","sort-generation-fn"])]))}var i=r(87619),l=r(70486),c=r(16822),d=r(35664),p=r(88339),u=r(55423),h=r(68774),m=r(32766),v=r(41837);const g={id:m.rk.VM_SNAPSHOT,type:d.yx,attributes:{kind:m.rk.VM_SNAPSHOT,namespaced:!0},metadata:{name:m.rk.VM_SNAPSHOT}};var w={name:"HarvesterListVMSnapshot",components:{ResourceTable:c.A,Loading:i.A,Masthead:l.A,FilterVMSchedule:u.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,p.kR)({vms:this.$store.dispatch(`${e}/findAll`,{type:m.rk.VM}),rows:this.$store.dispatch(`${e}/findAll`,{type:m.rk.BACKUP})}),r=this.$store.getters[`${e}/schemaFor`](m.rk.BACKUP);r?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:m.rk.VM_SNAPSHOT,isCreatable:!1}),this.rows=t.rows,this.snapshots=t.rows},data(){const e={...this.$route.params},t=e.resource;return{rows:[],snapshots:[],searchSchedule:"",resource:t}},computed:{headers(){const e=[h.c4,h.o_,h.CU,{name:"targetVM",labelKey:"harvester.tableHeaders.targetVm",value:"attachVM",align:"left",sort:"attachVM",formatter:"AttachVMWithName"}];return this.schedulingVMBackupFeatureEnabled&&e.push({name:"backupCreatedFrom",labelKey:"harvester.tableHeaders.vmSchedule",value:"sourceSchedule",sort:"sourceSchedule",formatter:"BackupCreatedFrom"}),e.push({name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"center",sort:"status.readyToUse",formatter:"Checked"},h.K),e},schedulingVMBackupFeatureEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("schedulingVMBackup")},getRawRows(){return this.rows.filter((e=>e.spec?.type===v.aS.SNAPSHOT))},schema(){return g},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)},filteredRows(){return this.snapshots.filter((e=>e.spec?.type!==v.aS.BACKUP))}},methods:{changeRows(e,t){this["searchSchedule"]=t,this["snapshots"]=e},sortGenerationFn(){let e=(0,c.S)(this.schema,this.$store);return e+=this.searchSchedule,e}}},f=r(47433);const y=(0,f.A)(w,[["render",n]]);var k=y},59021:function(e,t,r){"use strict";r.r(t),r.d(t,{VM_HEADERS:function(){return f},default:function(){return N}});var s=r(9274);const o={key:1},a={class:"state"},n={class:"name-console"},i={key:1};function l(e,t,r,l,c,d){const p=(0,s.resolveComponent)("Loading"),u=(0,s.resolveComponent)("HarvesterVmState"),h=(0,s.resolveComponent)("router-link"),m=(0,s.resolveComponent)("ConsoleBar"),v=(0,s.resolveComponent)("ResourceTable"),g=(0,s.resolveDirective)("tooltip");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(p,{key:0})):((0,s.openBlock)(),(0,s.createElementBlock)("div",o,[(0,s.createVNode)(v,(0,s.mergeProps)(e.$attrs,{headers:d.headers,"default-sort-by":"age",rows:d.rows,schema:r.schema,groupable:!0,"key-field":"_key"}),{"cell:state":(0,s.withCtx)((e=>[(0,s.createElementVNode)("div",a,[(0,s.createVNode)(u,{class:"vmstate",row:e.row,"all-node-network":c.allNodeNetworks,"all-cluster-network":c.allClusterNetworks},null,8,["row","all-node-network","all-cluster-network"])])])),"cell:name":(0,s.withCtx)((e=>[(0,s.createElementVNode)("div",n,[e.row.type!==c.HCI.VMI?((0,s.openBlock)(),(0,s.createBlock)(h,{key:0,to:e.row.detailLocation},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.row.metadata.name)+" ",1),d.lockIconTooltipMessage(e.row)?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createElementBlock)("i",{key:0,class:(0,s.normalizeClass)(["icon icon-lock",{"green-icon":"all"===e.row.encryptedVolumeType,"yellow-icon":"partial"===e.row.encryptedVolumeType}])},null,2)),[[g,d.lockIconTooltipMessage(e.row)]]):(0,s.createCommentVNode)("",!0)])),_:2},1032,["to"])):((0,s.openBlock)(),(0,s.createElementBlock)("span",i,(0,s.toDisplayString)(e.row.metadata.name),1)),(0,s.createVNode)(m,{"resource-type":e.row,class:"console mr-10 ml-10"},null,8,["resource-type"])])])),_:1},16,["headers","rows","schema"])]))}var c=r(16822),d=r(68774),p=r(35664),u=r(88339),h=r(87619),m=r(76978),v=r(32766),g=r(98993),w=r(58784);const f=[d.c4,{...d.o_,width:350},d.CU,{name:"CPU",label:"CPU",sort:["displayCPU"],value:"displayCPU",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"HarvesterIpAddress",labelKey:"tableHeaders.ipAddress",sort:["id"]},{...d.K,sort:"metadata.creationTimestamp:desc"}];var y={name:"HarvesterListVM",components:{Loading:h.A,HarvesterVmState:g["default"],ConsoleBar:w.A,ResourceTable:c.A},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={vms:this.$store.dispatch(`${e}/findAll`,{type:v.rk.VM,opt:{force:!0}}),pod:this.$store.dispatch(`${e}/findAll`,{type:p.Sm}),pvcs:this.$store.dispatch(`${e}/findAll`,{type:p.YH}),pvs:this.$store.dispatch(`${e}/findAll`,{type:p.PV}),images:this.$store.dispatch(`${e}/findAll`,{type:v.rk.IMAGE}),restore:this.$store.dispatch(`${e}/findAll`,{type:v.rk.RESTORE}),backups:this.$store.dispatch(`${e}/findAll`,{type:v.rk.BACKUP}),storage:this.$store.dispatch(`${e}/findAll`,{type:p.fJ})};this.$store.getters[`${e}/schemaFor`](v.rk.RESOURCE_QUOTA)&&(t.resourceQuotas=this.$store.dispatch(`${e}/findAll`,{type:v.rk.RESOURCE_QUOTA})),this.$store.getters[`${e}/schemaFor`](p.NW)&&(t.nodes=this.$store.dispatch(`${e}/findAll`,{type:p.NW}),this.hasNode=!0),this.$store.getters[`${e}/schemaFor`](v.rk.NODE_NETWORK)&&(t.nodeNetworks=this.$store.dispatch(`${e}/findAll`,{type:v.rk.NODE_NETWORK})),this.$store.getters[`${e}/schemaFor`](v.rk.CLUSTER_NETWORK)&&(t.clusterNetworks=this.$store.dispatch(`${e}/findAll`,{type:v.rk.CLUSTER_NETWORK}));const r=await(0,u.kR)(t);this.allVMs=r.vms,this.allNodeNetworks=r.nodeNetworks||[],this.allClusterNetworks=r.clusterNetworks||[]},data(){return{hasNode:!1,allVMs:[],allVMIs:[],allNodeNetworks:[],allClusterNetworks:[],restartNotificationDisplayed:!1,HCI:v.rk}},computed:{headers(){const e={name:"restoreProgress",labelKey:"harvester.tableHeaders.restore",value:"restoreProgress",align:"left",formatter:"HarvesterBackupProgressBar",width:200},t={name:"node",label:"Node",value:"nodeName",sort:["realAttachNodeName"],formatter:"HarvesterHost",labelKey:"harvester.tableHeaders.vm.node"},r=(0,m.o8)(f);return this.hasNode&&r.splice(-1,0,t),this.hasBackUpRestoreInProgress&&r.splice(-1,0,e),r},rows(){const e=this.allVMIs.filter((e=>!this.allVMs.find((t=>t.id===e.id))));return[...this.allVMs,...e]},hasBackUpRestoreInProgress(){return!!this.rows.find((e=>e.restoreResource&&!e.restoreResource.fromSnapshot&&!e.restoreResource.isComplete))}},async created(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(`${e}/findAll`,{type:v.rk.VMI});await this.$store.dispatch(`${e}/findAll`,{type:v.rk.VMIM}),this["allVMIs"]=t},beforeUnmount(){this.$store.dispatch("growl/clear")},watch:{allVMs:{handler(e){const t=[];e.forEach((e=>{e.isRestartRequired&&t.push(e.metadata.name)}));const r=t.length;0===r&&this.restartNotificationDisplayed?this.restartNotificationDisplayed=!1:(r>0&&this.restartNotificationDisplayed&&this.$store.dispatch("growl/clear"),r>0&&t.length>0&&(this.$store.dispatch("growl/warning",{title:this.t("harvester.notification.restartRequired.title",{count:r}),message:this.t("harvester.notification.restartRequired.message",{vmNames:t.join(", ")}),timeout:1e4},{root:!0}),this.restartNotificationDisplayed=!0))},deep:!0}},methods:{lockIconTooltipMessage(e){const t="";return"all"===e.encryptedVolumeType?this.t("harvester.virtualMachine.volume.lockTooltip.all"):"partial"===e.encryptedVolumeType?this.t("harvester.virtualMachine.volume.lockTooltip.partial"):t}}},k=(r(36252),r(35466),r(47433));const b=(0,k.A)(y,[["render",l],["__scopeId","data-v-b0690372"]]);var N=b},51151:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".vm-schedule-dropdown .v-popper__arrow-container{display:none}",""]),t["default"]=i},72921:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".vm-schedule-filter[data-v-05c066f4]{display:inline-block}.vm-schedule-filter .banner-item[data-v-05c066f4]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.vm-schedule-filter .banner-item i[data-v-05c066f4]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-05c066f4]{width:-moz-max-content;width:max-content}",""]),t["default"]=i},37201:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),t["default"]=i},99826:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".badge-state[data-v-9e992d88]{padding:5px 10px;border:1px solid transparent;border-radius:20px}.badge-state.bg-info[data-v-9e992d88]{border-color:var(--primary)}.badge-state.bg-error[data-v-9e992d88]{border-color:var(--error)}.badge-state.bg-warning[data-v-9e992d88]{border-color:var(--warning)}.badge-state.bg-success[data-v-9e992d88]{color:var(--success);border-color:var(--success);background:transparent}.sortable-table TD .badge-state[data-v-9e992d88]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-wrap:break-word;display:inline-block;max-width:100%;position:relative;padding:2px 10px 1px 10px;font-size:1em;max-width:200px;font-size:.85em;vertical-align:middle}",""]),t["default"]=i},21126:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".state[data-v-216558d8]{display:flex;justify-content:space-between}.state .icon-warning[data-v-216558d8]{margin-top:2px}",""]),t["default"]=i},62376:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".state[data-v-3a727eb5]{display:flex;justify-content:space-between}.state .icon-warning[data-v-3a727eb5]{margin-top:2px}",""]),t["default"]=i},5839:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".growl-container{z-index:56!important}",""]),t["default"]=i},8586:function(e,t,r){"use strict";r.r(t);var s=r(36758),o=r.n(s),a=r(40935),n=r.n(a),i=n()(o());i.push([e.id,".state[data-v-b0690372]{display:flex}.state .vmstate[data-v-b0690372]{margin-right:6px}.green-icon[data-v-b0690372]{color:var(--success)}.yellow-icon[data-v-b0690372]{color:var(--warning)}.name-console[data-v-b0690372]{display:flex;align-items:center;justify-content:space-between}.name-console span[data-v-b0690372]{padding-right:4px;line-height:26px;white-space:nowrap}",""]),t["default"]=i},5662:function(e,t,r){"use strict";function s(e){const t=Object.keys(e),r=Object.values(e);return Promise.allSettled(r).then((e=>{const r={};for(let s=0;s<t.length;s++)"fulfilled"===e[s].status?r[t[s]]=e[s].value:r[t[s]]=[];return r}))}r.d(t,{v:function(){return s}})},21967:function(e,t,r){var s=r(51151);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("59a4d00e",s,!0,{sourceMap:!1,shadowMode:!1})},69753:function(e,t,r){var s=r(72921);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("e1fabce2",s,!0,{sourceMap:!1,shadowMode:!1})},93969:function(e,t,r){var s=r(37201);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("84bb1b30",s,!0,{sourceMap:!1,shadowMode:!1})},50002:function(e,t,r){var s=r(99826);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("3657a623",s,!0,{sourceMap:!1,shadowMode:!1})},84326:function(e,t,r){var s=r(21126);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("390707e0",s,!0,{sourceMap:!1,shadowMode:!1})},55336:function(e,t,r){var s=r(62376);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("526396c4",s,!0,{sourceMap:!1,shadowMode:!1})},36252:function(e,t,r){var s=r(5839);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("5ab7d020",s,!0,{sourceMap:!1,shadowMode:!1})},35466:function(e,t,r){var s=r(8586);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var o=r(74825).A;o("0c09fb36",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.8.0-dev.umd.min.189.js.map